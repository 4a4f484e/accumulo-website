<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/accumulo.css" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jqc-1.12.3/dt-1.10.12/datatables.min.css"/>

<title>Source Code and Developers Guide</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs-3.3.6/jqc-1.12.3/dt-1.10.12/datatables.min.js"></script>

<script>
  // show location of canonical site if not currently on the canonical site
  $(function() {
    var host = window.location.host;
    if (typeof host !== 'undefined' && host !== 'accumulo.apache.org') {
      $('#non-canonical').show();
    }
  });

  
  // decorate menu with currently navigated page
  $(function() {
    $("#nav_source").addClass("active");
  });
  

  $(function() {
    // decorate section headers with anchors
    return $("h2, h3, h4, h5, h6").each(function(i, el) {
      var $el, icon, id;
      $el = $(el);
      id = $el.attr('id');
      icon = '<i class="fa fa-link"></i>';
      if (id) {
        return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
      }
    });
  });

  // configure Google Analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  if (ga.hasOwnProperty('loaded') && ga.loaded === true) {
    ga('create', 'UA-50934829-1', 'apache.org');
    ga('send', 'pageview');
  }
</script>
</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-items">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/"><img id="nav-logo" alt="Apache Accumulo" class="img-responsive" src="/images/accumulo-logo.png" width="200"/></a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="nav navbar-nav">
        <li class="nav-link"><a href="/downloads">Download</a></li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Documentation<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li class="dropdown-header">1.8.0 Release (Latest)</li>
          <li id="nav_rn_180"><a href="/release_notes/1.8.0">Release Notes</a></li>
          <li><a href="/1.8/accumulo_user_manual">User Manual</a></li>
          <li><a href="/1.8/apidocs">Javadoc</a></li>
          <li id="nav_examples_18"><a href="/1.8/examples">Examples</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">1.7.2 Release</li>
          <li id="nav_rn_172"><a href="/release_notes/1.7.2">Release Notes</a></li>
          <li><a href="/1.7/accumulo_user_manual">User Manual</a></li>
          <li><a href="/1.7/apidocs">Javadoc</a></li>
          <li id="nav_examples_17"><a href="/1.7/examples">Examples</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">1.6.6 Release</li>
          <li id="nav_rn_166"><a href="/release_notes/1.6.6">Release Notes</a></li>
          <li><a href="/1.6/accumulo_user_manual">User Manual</a></li>
          <li><a href="/1.6/apidocs">Javadoc</a></li>
          <li id="nav_examples_16"><a href="/1.6/examples">Examples</a></li>
          <li class="divider"></li>
          <li id="nav_features"><a href="/notable_features">Features</a></li>
          <li id="nav_rn"><a href="/release_notes">Release Notes Archive</a></li>
          <li id="old_documentation"><a href="/old_documentation">Documentation Archive</a></li>
          <li id="nav_screenshots"><a href="/screenshots">Screenshots</a></li>
          <li id="nav_papers"><a href="/papers">Papers &amp; Presentations</a></li>
          <li id="nav_glossary"><a href="/glossary">Glossary</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Community<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li id="nav_getinvolved"><a href="/get_involved">Get Involved</a></li>
          <li id="nav_mailinglists"><a href="/mailing_list">Mailing Lists</a></li>
          <li id="nav_people"><a href="/people">People</a></li>
          <li id="nav_news"><a href="/news">News Archive</a></li>
          <li id="nav_projects"><a href="/projects">Community Projects</a></li>
          <li id="nav_thanks"><a href="/thanks">Thanks</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">Governance</li>
          <li id="nav_bylaws"><a href="/bylaws">Bylaws</a></li>
          <li id="nav_consensusbuilding"><a href="/governance/consensusBuilding">Consensus Building</a></li>
          <li id="nav_lazyconsensus"><a href="/governance/lazyConsensus">Lazy Consensus</a></li>
          <li id="nav_govreleasing"><a href="/governance/releasing">Releasing</a></li>
          <li id="nav_voting"><a href="/governance/voting">Voting</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Development<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="https://issues.apache.org/jira/browse/ACCUMULO">Issue Tracker <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://github.com/apache/accumulo/pulls">Pull Requests <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://builds.apache.org/view/A/view/Accumulo">Jenkins Builds <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://travis-ci.org/apache/accumulo">TravisCI Builds <i class="fa fa-external-link"></i></a></li>
          <li class="divider"></li>
          <li class="dropdown-header">Guides</li>
          <li id="nav_source"><a href="/source">Source &amp; Guide</a></li>
          <li id="nav_git"><a href="/git">Git Workflow</a></li>
          <li id="nav_versioning"><a href="/versioning">Versioning</a></li>
          <li id="nav_contrib"><a href="/contrib">Contrib Projects</a></li>
          <li id="nav_rb"><a href="/rb">Review Board</a></li>
          <li id="nav_releasing"><a href="/releasing">Making Releases</a></li>
          <li id="nav_verify_release"><a href="/verifying_releases">Verifying Releases</a></li>
        </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Apache Software Foundation<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="https://www.apache.org">Apache Homepage <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/licenses/LICENSE-2.0">License <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/sponsorship">Sponsorship <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/security">Security <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/thanks">Thanks <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <i class="fa fa-external-link"></i></a></li>
        </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <div class="panel panel-default pull-right">
<div class="panel-heading">Quick Links</div>
<div class="list-group">
<a href="https://git-wip-us.apache.org/repos/asf?p=accumulo.git;a=summary" class="list-group-item"><i class="fa fa-external-link"></i> Accumulo source</a>
<a href="https://builds.apache.org/job/Accumulo-Master" class="list-group-item"><i class="fa fa-external-link"></i> Master build on Jenkins</a>
<a href="https://issues.apache.org/jira/browse/ACCUMULO" class="list-group-item"><i class="fa fa-external-link"></i> Accumulo JIRA</a>
</div>
</div>

<h2 id="source-code">Source Code</h2>

<h3 id="apache-accumulo">Apache Accumulo</h3>

<p>Apache Accumulo™ source code is maintained using <a href="https://git-scm.com">Git</a> version control 
(<a href="https://git-wip-us.apache.org/repos/asf?p=accumulo.git;a=summary">browse</a>|<a href="git://git.apache.org/accumulo.git">checkout</a>).  It builds with <a href="https://maven.apache.org">Apache Maven</a>.</p>

<p>Instructions for configuring git are <a href="https://git-wip-us.apache.org">here</a>.</p>

<h3 id="contrib-projects">Contrib Projects</h3>

<p>Accumulo has a number of <a href="contrib">contrib projects</a> that maintain their own code repositories and release schedules.</p>

<h3 id="website">Website</h3>

<p>Accumulo’s web site is developed using <a href="https://jekyllrb.com">Jekyll</a>. Development is
performed by editing the contents of the <a href="https://git-wip-us.apache.org/repos/asf?p=accumulo.git;a=tree;h=gh-pages">gh-pages</a> branch, either
directly by a committer, with a pull request to <a href="https://github.com/apache/accumulo">GitHub</a>, or a patch
submitted to <a href="https://issues.apache.org/jira/browse/ACCUMULO">JIRA</a>. The rendered site can be previewed locally or on
<a href="http://apache.github.io/accumulo">GitHub</a>, and the rendered site (in the <code class="highlighter-rouge">_site</code> directory) will be
merged into the <code class="highlighter-rouge">asf-site</code> branch to update our <a href="https://accumulo.apache.org">official/canonical
site</a> after being built with the <code class="highlighter-rouge">_config-asf.yml</code> configuration.</p>

<p>To manage any Gem dependencies, it is highly recommended to use <a href="https://bundler.io">Bundler</a>.
To start using Bundler, install it and then the dependencies for the website:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gem install bundler
bundle install
</code></pre>
</div>

<p>To get help with jekyll:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>jekyll help
</code></pre>
</div>

<p>To test the site locally (usually on http://localhost:4000):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>jekyll serve --config _config-asf.yml --safe
</code></pre>
</div>

<p>To do the same with Bundler:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>bundle exec jekyll serve --config _config-asf.yml --safe
</code></pre>
</div>

<p>To build for updating the <code class="highlighter-rouge">asf-site</code> branch:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>jekyll build --config _config-asf.yml --safe
</code></pre>
</div>

<p>To do the same with Bundler:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>bundle exec jekyll build --config _config-asf.yml --safe
</code></pre>
</div>

<p>For preview convenience and consistent builds and testing, build using a
version which looks the same locally and on GitHub.</p>

<p>A <a href="https://git-wip-us.apache.org/repos/asf?p=accumulo.git;a=blob_plain;f=_devtools/git-hooks/post-commit;hb=gh-pages">post-commit hook</a> is available for you to automatically create a
commit in the <code class="highlighter-rouge">asf-site</code> branch locally each time you commit to the <code class="highlighter-rouge">gh-pages</code>
branch. You can also run this command manually:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>./_devtools/git-hooks/post-commit
</code></pre>
</div>

<p>To automatically run this post-commit hook in your local repository, copy
the given file into your <code class="highlighter-rouge">.git/hook</code> directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cp ./_devtools/git-hooks/post-commit .git/hooks/
</code></pre>
</div>

<h2 id="developers-guide">Developer’s Guide</h2>

<h3 id="building">Building</h3>

<h4 id="installing-apache-thrift">Installing Apache Thrift</h4>

<p>If you activate the ‘thrift’ Maven profile, the build of some modules will attempt to run the Apache Thrift command line to regenerate
stubs. If you activate this profile and don’t have Apache Thrift installed and in your path, you will see a warning and
your build will fail. For Accumulo 1.5.0 and greater, install Thrift 0.9 and make sure that the ‘thrift’ command is in your path. 
Watch out for THRIFT-1367; you may need to configure Thrift with –without-ruby. Most developers do not
need to install or modify the Thrift definitions as a part of developing against Apache Accumulo.</p>

<h4 id="checking-out-from-git">Checking out from Git</h4>

<p>To check out the code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>git clone https://git-wip-us.apache.org/repos/asf/accumulo.git
</code></pre>
</div>

<h4 id="running-a-build">Running a Build</h4>

<p>Accumulo uses  <a href="https://maven.apache.org">Apache Maven</a> to handle source building, testing, and packaging. To build Accumulo you will need to use Maven version 3.0.5 or later.</p>

<p>You should familiarize yourself with the <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle">Maven Build Lifecycle</a>, as well as the various plugins we use in our <a href="https://git-wip-us.apache.org/repos/asf?p=accumulo.git;a=blob_plain;f=pom.xml;hb=HEAD">POM</a>, in order to understand how Maven works and how to use the various build options while building Accumulo.</p>

<p>To build from source (for example, to deploy):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mvn package -Passemble
</code></pre>
</div>

<p>This will create a file accumulo-*-SNAPSHOT-dist.tar.gz in the assemble/target directory. Optionally, append <code class="highlighter-rouge">-DskipTests</code> if you want to skip the build tests.</p>

<p>To build your branch before submitting a pull request, you’ll probably want to run some basic “sunny-day” integration tests to ensure you haven’t made any grave errors, as well as <code class="highlighter-rouge">checkstyle</code> and <code class="highlighter-rouge">findbugs</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mvn verify -Psunny
</code></pre>
</div>

<p>To run specific unit tests, you can run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mvn package -Dtest=MyTest -DfailIfNoTests=false
</code></pre>
</div>

<p>Or to run the specific integration tests MyIT and YourIT (and skip all unit tests), you can run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mvn verify -Dtest=NoSuchTestExists -Dit.test=MyIT,YourIT -DfailIfNoTests=false
</code></pre>
</div>

<p>There are plenty of other options. For example, you can skip findbugs with <code class="highlighter-rouge">mvn verify -Dfindbugs.skip</code> or checkstyle <code class="highlighter-rouge">-Dcheckstyle.skip</code>, or control the number of forks to use while executing tests, <code class="highlighter-rouge">-DforkCount=4</code>, etc. You should check with specific plugins to see which command-line options are available to control their behavior. Note that not all options will result in a stable build, and options may change over time.</p>

<p>If you regularly switch between major development branches, you may receive errors about improperly licensed files from the <a href="https://creadur.apache.org/rat/apache-rat-plugin">RAT plugin</a>. This is caused by modules that exist in one branch and not the other leaving Maven build files that the RAT plugin no longer understands how to ignore.</p>

<p>The easiest fix is to ensure all of your current changes are stored in git and then cleaning your workspace.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$&gt; git add path/to/file/that/has/changed
$&gt; git add path/to/other/file
$&gt; git clean -df
</code></pre>
</div>

<p>Note that this git clean command will delete any files unknown to git in a way that is irreversible. You should check that no important files will be included by first looking at the “untracked files” section in a <code class="highlighter-rouge">git status</code> command.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$&gt; git status
# On branch master
nothing to commit (working directory clean)
$&gt; mvn package
{ maven output elided }
$&gt; git checkout 1.6.1-SNAPSHOT
Switched to branch '1.6.1-SNAPSHOT'
$&gt; git status
# On branch 1.6.1-SNAPSHOT
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
# mapreduce/
# shell/
nothing added to commit but untracked files present (use "git add" to track)
$&gt; git clean -df
Removing mapreduce/
Removing shell/
$&gt; git status
# On branch 1.6.1-SNAPSHOT
nothing to commit (working directory clean)
</code></pre>
</div>

<h3 id="continuous-integration">Continuous Integration</h3>

<p>Accumulo uses <a href="https://jenkins.io">Jenkins</a> for automatic builds.</p>

<p><img src="https://builds.apache.org/job/Accumulo-Master/lastBuild/buildStatus" style="height: 1.1em" /> <a href="https://builds.apache.org/job/Accumulo-Master">Master</a></p>

<p><img src="https://builds.apache.org/job/Accumulo-1.7/lastBuild/buildStatus" style="height: 1.1em" /> <a href="https://builds.apache.org/job/Accumulo-1.7">1.7 Branch</a></p>

<p><img src="https://builds.apache.org/job/Accumulo-1.6/lastBuild/buildStatus" style="height: 1.1em" /> <a href="https://builds.apache.org/job/Accumulo-1.6">1.6 Branch</a></p>

<h3 id="issue-tracking">Issue Tracking</h3>

<p>Accumulo <a href="https://issues.apache.org/jira/browse/ACCUMULO">tracks issues</a> with <a href="https://www.atlassian.com/software/jira">JIRA</a>.  Every commit should reference a JIRA ticket of the form ACCUMULO-#.</p>

<h3 id="merging-practices">Merging Practices</h3>

<p>Changes should be merged from earlier branches of Accumulo to later branches.  Ask the <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#100;&#101;&#118;&#064;&#097;&#099;&#099;&#117;&#109;&#117;&#108;&#111;&#046;&#097;&#112;&#097;&#099;&#104;&#101;&#046;&#111;&#114;&#103;">dev list</a> for instructions.</p>

<h3 id="public-api">Public API</h3>

<p>Refer to the README in the release you are using to see what packages are in the public API.</p>

<p>Changes to non-private members of those classes are subject to additional scrutiny to minimize compatibility problems across Accumulo versions.</p>

<h3 id="coding-practices">Coding Practices</h3>

<table class="table">
  <tbody>
    <tr>
      <td><strong>License Header</strong></td>
      <td>Always add the current ASF license header as described in <a href="https://www.apache.org/legal/src-headers">ASF Source Header</a>.</td>
    </tr>
    <tr>
      <td><strong>Trailing Whitespaces</strong></td>
      <td>Remove all trailing whitespaces. Eclipse users can use Source→Cleanup option to accomplish this.</td>
    </tr>
    <tr>
      <td><strong>Indentation</strong></td>
      <td>Use 2 space indents and never use tabs!</td>
    </tr>
    <tr>
      <td><strong>Line Wrapping</strong></td>
      <td>Use 160-column line width for Java code and Javadoc.</td>
    </tr>
    <tr>
      <td><strong>Control Structure New Lines</strong></td>
      <td>Use a new line with single statement if/else blocks.</td>
    </tr>
    <tr>
      <td><strong>Author Tags</strong></td>
      <td>Do not use Author Tags. The code is developed and owned by the community.</td>
    </tr>
  </tbody>
</table>

<h3 id="code-review">Code Review</h3>

<p>Accumulo has <a href="rb">guidelines for using Review Board</a> to support code reviews.</p>

<h3 id="ide-configuration-tips">IDE Configuration Tips</h3>

<h4 id="eclipse">Eclipse</h4>

<ul>
  <li>Download Eclipse <a href="https://git-wip-us.apache.org/repos/asf?p=accumulo.git;a=tree;f=contrib;hb=HEAD">formatting and style guides for Accumulo</a>.</li>
  <li>Import Formatter: Preferences &gt; Java &gt; Code Style &gt;  Formatter and import the Eclipse-Accumulo-Codestyle.xml downloaded in the previous step.</li>
  <li>Import Template: Preferences &gt; Java &gt; Code Style &gt; Code Templates and import the Eclipse-Accumulo-Template.xml. Make sure to check the “Automatically add comments” box. This template adds the ASF header and so on for new code.</li>
</ul>

<h4 id="intellij">IntelliJ</h4>

<ul>
  <li>Formatter <a href="https://code.google.com/p/eclipse-code-formatter-intellij-plugin">plugin</a> that uses eclipse code style xml.</li>
</ul>

<h3 id="release-guide">Release Guide</h3>

<p>Accumulo’s release guide can be found <a href="governance/releasing">here</a>.</p>


        </div>

        
<footer>

  <p><a href="https://www.apache.org"><img src="/images/feather-small.gif" alt="Apache Software Foundation" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2016 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
