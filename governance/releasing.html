<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" integrity="sha384-awusxf8AUojygHf2+joICySzB780jVvQaVCAt1clU3QsyAitLGul28Qxb2r1e5g+" crossorigin="anonymous">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.css">
<link href="/css/accumulo.css" rel="stylesheet" type="text/css">

<title>Release Guide</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.js"></script>
<script>
  // show location of canonical site if not currently on the canonical site
  $(function() {
    var host = window.location.host;
    if (typeof host !== 'undefined' && host !== 'accumulo.apache.org') {
      $('#non-canonical').show();
    }
  });

  $(function() {
    // decorate section headers with anchors
    return $("h2, h3, h4, h5, h6").each(function(i, el) {
      var $el, icon, id;
      $el = $(el);
      id = $el.attr('id');
      icon = '<i class="fa fa-link"></i>';
      if (id) {
        return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
      }
    });
  });
  
  // configure Google Analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  if (ga.hasOwnProperty('loaded') && ga.loaded === true) {
    ga('create', 'UA-50934829-1', 'apache.org');
    ga('send', 'pageview');
  }
</script>

</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-items">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/"><img id="nav-logo" alt="Apache Accumulo" class="img-responsive" src="/images/accumulo-logo.png" width="200"/></a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="nav navbar-nav">
        <li class="nav-link"><a href="/downloads">Download</a></li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Releases<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/release/accumulo-1.8.0/">1.8.0 (Latest)</a></li>
          <li><a href="/release/accumulo-1.7.2/">1.7.2</a></li>
          <li><a href="/release/accumulo-1.6.6/">1.6.6</a></li>
          <li><a href="/release/">Archive</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Documentation<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/user-manual/">User Manuals</a></li>
          <li><a href="/javadocs/">Javadocs</a></li>
          <li><a href="/examples/">Examples</a></li>
          <li><a href="/notable_features">Features</a></li>
          <li><a href="/screenshots">Screenshots</a></li>
          <li><a href="/papers">Papers &amp; Presentations</a></li>
          <li><a href="/glossary">Glossary</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Community<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/get_involved">Get Involved</a></li>
          <li><a href="/mailing_list">Mailing Lists</a></li>
          <li><a href="/people">People</a></li>
          <li><a href="/news">News Archive</a></li>
          <li><a href="/projects">Community Projects</a></li>
          <li><a href="/thanks">Thanks</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">Governance</li>
          <li><a href="/bylaws">Bylaws</a></li>
          <li><a href="/governance/consensusBuilding">Consensus Building</a></li>
          <li><a href="/governance/lazyConsensus">Lazy Consensus</a></li>
          <li><a href="/governance/releasing">Releasing</a></li>
          <li><a href="/governance/voting">Voting</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Development<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="https://issues.apache.org/jira/browse/ACCUMULO">Issue Tracker <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://github.com/apache/accumulo/pulls">Pull Requests <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://builds.apache.org/view/A/view/Accumulo">Jenkins Builds <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://travis-ci.org/apache/accumulo">TravisCI Builds <i class="fa fa-external-link"></i></a></li>
          <li class="divider"></li>
          <li class="dropdown-header">Guides</li>
          <li><a href="/source">Source &amp; Guide</a></li>
          <li><a href="/git">Git Workflow</a></li>
          <li><a href="/versioning">Versioning</a></li>
          <li><a href="/contrib">Contrib Projects</a></li>
          <li><a href="/rb">Review Board</a></li>
          <li><a href="/releasing">Making Releases</a></li>
          <li><a href="/verifying_releases">Verifying Releases</a></li>
        </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Apache Software Foundation<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="https://www.apache.org">Apache Homepage <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/licenses/LICENSE-2.0">License <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/sponsorship">Sponsorship <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/security">Security <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/thanks">Thanks <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <i class="fa fa-external-link"></i></a></li>
        </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <h1 class="title">Release Guide</h1>
          
          <h2 id="versioning">Versioning</h2>

<p>Accumulo has adopted <a href="/versioning">Semantic Versioning</a> and follows their rules and guidelines.</p>

<h2 id="testing">Testing</h2>

<p>Testing for an Accumulo release includes a few steps that a developer may take without a Hadoop cluster and several that require a working cluster. For minor releases, 
the tests which run on a Hadoop cluster are recommended to be completed but are not required. Running even a reduced set of tests against real hardware is always encouraged
even if the full test suite (in breadth of nodes or duration) is not executed. If PMC members do not believe adequate testing was performed for the sake of making the proposed
release, the release should be vetoed via the normal voting process. New major releases are expected to run a full test suite.</p>

<h3 id="stand-alone">Stand alone</h3>
<p>The following steps can be taken without having an underlying cluster. They SHOULD be handled with each Hadoop profile available for a given release version. To activate an alternative profile specify e.g. “-Dhadoop.profile=2” for the Hadoop 2 profile on the Maven commandline. Some older versions of Accumulo referred to Hadoop profiles diferently; see the README that came with said versions for details on building against different Hadoop versions.</p>

<ol>
  <li>All JUnit tests must pass.  This should be a requirement of any patch so it should never be an issue of the codebase.
    - Use “mvn package” to run against the default profile of a particular release
    - Use “mvn -Dhadoop.profile=2 package” to test against the Hadoop 2 profile on e.g. 1.4 or 1.5
    - Use “mvn -Dhadoop.profile=1 package” to test against the Hadoop 1 profile on e.g. 1.6 or later
    <ul>
      <li>Analyze output of static analysis tools like Findbugs and PMD.</li>
      <li>For versions 1.6 and later, all functional tests must pass via the Maven failsafe plugin.
        <ul>
          <li>Use “mvn verify” to run against the default profile of a particular release</li>
          <li>Use “mvn -Dhadoop.profile=1 verify” to run the functional tests against the Hadoop 1 profile</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="cluster-based">Cluster based</h3>
<p>The following tests require a Hadoop cluster running a minimum of HDFS, MapReduce, and ZooKeeper. The cluster MAY have any number of worker nodes; it can even be a single node in pseudo-distributed mode. A cluster with multiple tablet servers SHOULD be used so that more of the code base will be exercised. For the purposes of release testing, you should note the number of nodes and versions used. See the Releasing section for more details.</p>

<ol>
  <li>For versions prior to 1.6, all functional tests must complete successfully.
    - See $ACCUMULO_HOME/test/system/auto/README for details on running the functional tests.
    <ul>
      <li>Two 24-hour periods of the LongClean module of the RandomWalk test need to be run successfully. One of them must use agitation and the other should not.
        <ul>
          <li>See $ACCUMULO_HOME/test/system/randomwalk/README for details on running the LongClean module.</li>
        </ul>
      </li>
      <li>Two 24-hour periods of the continuous ingest test must be validated successfully. One test period must use agitation and the other should not.
        <ul>
          <li>See $ACCUMULO_HOME/test/system/continuous/README for details on running and verifying the continuous ingest test.</li>
        </ul>
      </li>
      <li>Two 72-hour periods of continuous ingest must run. One test period must use agitation and the other should not. No validation is necessary but the cluster should be checked to ensure it is still functional.</li>
    </ul>
  </li>
</ol>

<h2 id="releasing">Releasing</h2>

<ol>
  <li>Tag the tested branch. It should:
    - Have its version set to note it is RC1.
    - Be fully built, including a tar.gz of the entire project as well as the documentation.
    <ul>
      <li>PGP Signatures of the tarball must be signed to a separate file and made available to the public, along with the tarball and MD5 and SHA512 checksums. The <a href="https://repository.apache.org">Apache Nexus server</a> fills this role for us via the maven-release-plugin.</li>
      <li>A vote must be made on dev@accumulo. Lazy consensus is not sufficient for a release; at least 3 +1 votes from PMC members are required. All checksums and signatures need to be verified before any voter can +1 it. Voting shall last 72 hours.
        <ul>
          <li>Voters SHOULD include with their vote details on the tests from the testing section they have successfully run. If given, said details for each test MUST include: the number of worker nodes in the cluster, the operating system and version, the Hadoop version, and the Zookeeper version.  For testing done on a version other than the release candidate that is deemed relevant, include the commit hash. All such gathered testing information will be included in the release notes.</li>
        </ul>
      </li>
      <li>Upon successful vote, the new releases can be retagged to remove the RC status and released on the Accumulo webpage.</li>
      <li>If at any time the tag needs to be remade due to any sort of error, it should be incremented to the next release candidate number.</li>
    </ul>
  </li>
</ol>


        </div>

        
<footer>

  <p><a href="https://www.apache.org"><img src="/images/feather-small.gif" alt="Apache Software Foundation" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2016 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
